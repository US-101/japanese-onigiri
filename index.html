<!DOCTYPE html><html lang="zh-Hant"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>日語飯糰｜發音練習</title><meta name="description" content="針對旅行的時候臨時可用的方便小物"><meta property="og:type" content="website"><meta property="og:title" content="日語飯糰｜發音練習"><meta property="og:description" content="針對旅行的時候臨時可用的方便小物"><meta property="og:image" content="icons/icon-512.png"><meta property="og:url" content="https://us-101.github.io/japanese-pronunciation/index.html"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="日語飯糰｜發音練習"><meta name="twitter:description" content="針對旅行的時候臨時可用的方便小物"><meta name="twitter:image" content="icons/icon-512.png"><link rel="manifest" href="manifest.json"><link rel="stylesheet" href="styles.css"><meta name="theme-color" content="#F3FCFD">
<link rel="apple-touch-icon" href="icons/icon-512.png"><script>if('serviceWorker' in navigator){addEventListener('load',()=>navigator.serviceWorker.register('./sw.js'));}</script></head><body>
<header class="topbar"><div class="bar"><h1 class="title"><img src="icons/p1.svg" alt=""></h1></div></header>

<div class="appbar">
  <div class="row" style="justify-content:space-between;gap:12px;max-width:540px;margin:0 auto;padding:12px 16px 6px 16px">
    <div style="display:flex;gap:12px">
      <button id="btnV" class="pill teal">平假名</button>
      <button id="btnC" class="pill">片假名</button>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <span id="mickey" class="pill"><img src="icons/micky.svg" width="20" height="20" alt=""></span>
      <span class="pill amber speed">x0.75</span>
    </div>
  </div>
  <div class="row" style="justify-content:flex-start;max-width:540px;margin:0 auto;padding:0 16px 8px 16px">
    <div style="font-size:12px;color:#97a1a6">按一下有聲音 · 一回クリックで音声<br>快速點兩下閱讀單字 · 素早く二回クリックで単語読み<br>按下<img src="icons/micky.svg" width="16" height="16" alt="米奇" style="vertical-align:middle;margin:0 2px;filter:grayscale(100%) brightness(0) invert(70%);">切換成米奇模式 · <img src="icons/micky.svg" width="16" height="16" alt="ミッキー" style="vertical-align:middle;margin:0 2px;filter:grayscale(100%) brightness(0) invert(70%);">を押すとミッキーモード切替</div>
  </div>
</div>

<main class="wrap">
  <div id="gridV" class="grid"></div>
  <div id="gridC" class="grid" style="display:none"></div>
</main>

<nav class="tabbar"><div class="in"><a class='active' href='index.html'><span class='ico'><img src='icons/p1.svg' alt=''></span>發音練習</a><a class='' href='travel.html'><span class='ico'><img src='icons/p2.svg' alt=''></span>旅行會話</a><a class='' href='translate.html'><span class='ico'><img src='icons/p3.svg' alt=''></span>實時翻譯</a><a class='' href='history.html'><span class='ico'><img src='icons/p4.svg' alt=''></span>歷史紀錄</a></div></nav>

<section class="modal" id="detail">
  <div class="appbar" id="detailAppbar" style="position:fixed;top:0;left:0;right:0;z-index:3000;background:#F3FCFD!important;border-bottom:1px solid var(--line)">
    <div class="title" style="text-align:center;margin:0;letter-spacing:0;color:#78bfc0;font-weight:700;display:flex;align-items:center;justify-content:center;min-height:44px;padding:14px 16px">
      <img src="icons/p1.svg" alt="發音練習" style="width:44px;height:44px;display:block;filter:invert(79%) sepia(14%) saturate(1036%) hue-rotate(130deg) brightness(92%) contrast(88%)">
    </div>
    <div class="row" style="justify-content:space-between;gap:12px;max-width:540px;margin:0 auto;padding:20px 16px 6px 16px">
      <button class="pill teal" id="back">← 上一頁</button>
      <div style="display:flex;gap:8px;align-items:center">
        <span id="mickeyModal" class="pill"><img src="icons/micky.svg" width="20" height="20" alt=""></span>
        <span class="pill amber speed">x0.75</span>
      </div>
    </div>
  </div>
  <div class="sheet" style="padding-top:140px;padding-bottom:110px">
    <div class="big" id="bigLetter"><span id="bigSym">あ</span></div>
    <div id="words"></div>
  </div>
</section>

<script>
const DATA={ 
  vowels:[
    {sym:"あ", roman:"a", say:"あ", words:[["赤","紅色","red"],["雨","雨","rain"],["足","腳","foot"],["朝","早上","morning"],["頭","頭","head"]]}, 
    {sym:"い", roman:"i", say:"い", words:[["犬","狗","dog"],["一","一","one"],["家","家","house"],["椅子","椅子","chair"],["苺","草莓","strawberry"]]}, 
    {sym:"う", roman:"u", say:"う", words:[["馬","馬","horse"],["海","海","sea"],["歌","歌","song"],["牛","牛","cow"],["腕","手臂","arm"]]}, 
    {sym:"え", roman:"e", say:"え", words:[["鉛筆","鉛筆","pencil"],["駅","車站","station"],["絵本","繪本","picture book"],["英語","英語","English"],["笑顔","笑容","smile"]]}, 
    {sym:"お", roman:"o", say:"お", words:[["お金","錢","money"],["お茶","茶","tea"],["男","男人","man"],["女","女人","woman"],["花","花","flower"]]}, 
    {sym:"か", roman:"ka", say:"か", words:[["鞄","包包","bag"],["紙","紙","paper"],["風","風","wind"],["川","河","river"],["肩","肩膀","shoulder"]]}, 
    {sym:"き", roman:"ki", say:"き", words:[["木","樹","tree"],["黄色","黃色","yellow"],["狐","狐狸","fox"],["金","金","gold"],["気持ち","心情","feeling"]]}, 
    {sym:"く", roman:"ku", say:"く", words:[["口","嘴巴","mouth"],["靴","鞋子","shoes"],["雲","雲","cloud"],["熊","熊","bear"],["黒","黑色","black"]]}, 
    {sym:"け", roman:"ke", say:"け", words:[["剣","劍","sword"],["消しゴム","橡皮擦","eraser"],["稽古","練習","practice"],["経験","經驗","experience"],["喧嘩","吵架","fight"]]}, 
    {sym:"こ", roman:"ko", say:"こ", words:[["子供","小孩","child"],["こんにちは","你好","hello"],["こんばんは","晚安","good evening"],["今日","今天","today"],["心","心","heart"]]}, 
    {sym:"さ", roman:"sa", say:"さ", words:[["魚","魚","fish"],["桜","櫻花","cherry blossom"],["砂糖","砂糖","sugar"],["寒い","冷","cold"],["作品","作品","work"]]}, 
    {sym:"し", roman:"shi", say:"し", words:[["白","白色","white"],["新聞","報紙","newspaper"],["仕事","工作","work"],["週末","週末","weekend"],["宿題","作業","homework"]]}, 
    {sym:"す", roman:"su", say:"す", words:[["寿司","壽司","raw fish"],["鈴","鈴鐺","bell"],["好き","喜歡","like"],["すみません","對不起","excuse me"],["凄い","厲害","amazing"]]}, 
    {sym:"せ", roman:"se", say:"せ", words:[["先生","老師","teacher"],["世界","世界","world"],["洗濯","洗衣服","laundry"],["生活","生活","life"],["成功","成功","success"]]}, 
    {sym:"そ", roman:"so", say:"そ", words:[["空","天空","sky"],["蕎麦","蕎麥麵","buckwheat noodles"],["祖父","祖父","grandfather"],["祖母","祖母","grandmother"],["掃除","打掃","cleaning"]]}, 
    {sym:"た", roman:"ta", say:"た", words:[["食べる","吃","eat"],["楽しい","快樂","fun"],["建物","建築物","building"],["宝物","寶物","treasure"],["卵","蛋","egg"]]}, 
    {sym:"ち", roman:"chi", say:"ち", words:[["小さい","小","small"],["力","力量","power"],["地図","地圖","map"],["父","父親","father"],["中学","中學","middle school"]]}, 
    {sym:"つ", roman:"tsu", say:"つ", words:[["机","桌子","desk"],["月","月亮","moon"],["強い","強","strong"],["妻","妻子","wife"],["作る","製作","make"]]}, 
    {sym:"て", roman:"te", say:"て", words:[["天気","天氣","weather"],["手紙","信","letter"],["天ぷら","天婦羅","fried food"],["店員","店員","clerk"]]}, 
    {sym:"と", roman:"to", say:"と", words:[["時計","時鐘","clock"],["鳥","鳥","bird"],["遠い","遠","far"],["友達","朋友","friend"],["図書館","圖書館","library"]]}, 
    {sym:"な", roman:"na", say:"な", words:[["名前","名字","name"],["夏","夏天","summer"],["何","什麼","what"],["仲良し","好朋友","good friend"],["長い","長","long"]]}, 
    {sym:"に", roman:"ni", say:"に", words:[["日本","日本","Japan"],["日曜日","星期日","Sunday"],["人形","人偶","doll"],["日本語","日語","Japanese"],["庭","庭院","garden"]]}, 
    {sym:"ぬ", roman:"nu", say:"ぬ", words:[["縫いぐるみ","布偶","stuffed animal"],["温い","溫","lukewarm"],["盗む","偷","steal"],["沼","沼澤","swamp"],["脱ぐ","脫","take off"]]}, 
    {sym:"ね", roman:"ne", say:"ね", words:[["猫","貓","cat"],["寝る","睡覺","sleep"],["願い","願望","wish"],["年","年","year"],["鼠","老鼠","mouse"]]}, 
    {sym:"の", roman:"no", say:"の", words:[["海苔","海苔","seaweed"],["飲む","喝","drink"],["脳","腦","brain"],["残る","留下","remain"],["覗く","窺視","peek"]]}, 
    {sym:"は", roman:"ha", say:"は", words:[["花","花","flower"],["箸","筷子","chopsticks"],["春","春天","spring"],["箱","盒子","box"],["速い","快","fast"]]}, 
    {sym:"ひ", roman:"hi", say:"ひ", words:[["火","火","fire"],["飛行機","飛機","airplane"],["昼","中午","noon"],["平仮名","平假名","hiragana script"],["秘密","秘密","secret"]]}, 
    {sym:"ふ", roman:"fu", say:"ふ", words:[["船","船","ship"],["服","衣服","clothes"],["冬","冬天","winter"],["古い","舊","old"],["布団","棉被","futon"]]}, 
    {sym:"へ", roman:"he", say:"へ", words:[["部屋","房間","room"],["下手","不擅長","bad at"],["平和","和平","peace"],["変","奇怪","strange"],["平気","平常","calm"]]}, 
    {sym:"ほ", roman:"ho", say:"ほ", words:[["本","書","book"],["星","星星","star"],["本当","真的","really"],["本屋","書店","bookstore"],["本質","本質","essence"]]}, 
    {sym:"ま", roman:"ma", say:"ま", words:[["窓","窗戶","window"],["町","城鎮","town"],["待つ","等待","wait"],["漫画","漫畫","comic"],["毎朝","每天早上","every morning"]]}, 
    {sym:"み", roman:"mi", say:"み", words:[["水","水","water"],["道","道路","road"],["緑","綠色","green"],["皆さん","大家","everyone"],["見る","看","see"]]}, 
    {sym:"む", roman:"mu", say:"む", words:[["虫","蟲","insect"],["難しい","困難","difficult"],["昔","以前","old times"],["無理","無理","impossible"],["娘","女兒","daughter"]]}, 
    {sym:"め", roman:"me", say:"め", words:[["目","眼睛","eye"],["眼鏡","眼鏡","glasses"],["麺","麵","noodles"],["名刺","名片","business card"],["珍しい","罕見","rare"]]}, 
    {sym:"も", roman:"mo", say:"も", words:[["桃","桃子","peach"],["森","森林","forest"],["門","門","gate"],["もっと","更多","more"],["文句","抱怨","complaint"]]}, 
    {sym:"や", roman:"ya", say:"や", words:[["山","山","mountain"],["野菜","蔬菜","vegetable"],["約束","約定","promise"],["焼く","燒","burn"],["役人","役人","official"]]}, 
    {sym:"ゆ", roman:"yu", say:"ゆ", words:[["雪","雪","snow"],["夢","夢","dream"],["夕方","傍晚","evening"],["郵便","郵件","mail"],["友人","友人","friend"]]}, 
    {sym:"よ", roman:"yo", say:"よ", words:[["夜","夜晚","night"],["読む","讀","read"],["よろしく","請多指教","please"],["予定","預定","schedule"],["喜ぶ","高興","rejoice"]]}, 
    {sym:"ら", roman:"ra", say:"ら", words:[["楽","輕鬆","easy"],["蘭","蘭花","orchid"],["落書き","塗鴉","doodle"],["楽天","樂天","optimism"],["落語","落語","comic storytelling"]]}, 
    {sym:"り", roman:"ri", say:"り", words:[["林檎","蘋果","apple"],["旅行","旅行","travel"],["料理","料理","cooking"],["寮","宿舍","dormitory"],["理解","理解","understanding"]]}, 
    {sym:"る", roman:"ru", say:"る", words:[["留守","不在","absence"],["類","類","kind"],["類型","類型","type"],["類似","類似","similar"],["累積","累積","accumulation"]]}, 
    {sym:"れ", roman:"re", say:"れ", words:[["練習","練習","practice"],["歴史","歷史","history"],["零","零","zero"],["冷蔵庫","冰箱","refrigerator"],["礼儀","禮儀","manners"]]}, 
    {sym:"ろ", roman:"ro", say:"ろ", words:[["六","六","six"],["録音","錄音","recording"],["録画","錄畫","video recording"],["ろくに","好好地","properly"],["老人","老人","elderly person"]]}, 
    {sym:"わ", roman:"wa", say:"わ", words:[["若者","年輕人","young person"],["忘れる","忘記","forget"],["分かる","明白","understand"],["笑い","笑","laugh"],["若い","年輕","young"]]}, 
    {sym:"を", roman:"wo", say:"を", words:[["を","助詞","particle"]]}, 
    {sym:"ん", roman:"n", say:"ん", words:[["簡単","簡單","easy"],["漢字","漢字","Chinese characters"],["日本語","日語","Japanese"],["先生","老師","teacher"],["運動","運動","exercise"]]}
  ],
  consonants:[
    {sym:"ア", roman:"a", say:"ア", words:[["アニメ","動畫","animation"],["アパート","公寓","apartment"],["アフリカ","非洲","Africa"],["アメリカ","美國","America"],["アルバイト","打工","part-time job"]]}, 
    {sym:"イ", roman:"i", say:"イ", words:[["イギリス","英國","England"],["イタリア","義大利","Italy"],["インターネット","網路","Internet"],["インド","印度","India"],["イベント","活動","event"]]}, 
    {sym:"ウ", roman:"u", say:"ウ", words:[["ウイスキー","威士忌","whiskey"],["ウエイター","服務生","waiter"],["ウエディング","婚禮","wedding"],["ウォーター","水","water"],["ウルグアイ","烏拉圭","Uruguay"]]}, 
    {sym:"エ", roman:"e", say:"エ", words:[["エアコン","冷氣","air conditioner"],["エスカレーター","手扶梯","escalator"],["エレベーター","電梯","elevator"],["エンジン","引擎","engine"],["エレクトロニクス","電子","electronics"]]}, 
    {sym:"オ", roman:"o", say:"オ", words:[["オーストラリア","澳洲","Australia"],["オートバイ","機車","motorcycle"],["オフィス","辦公室","office"],["オレンジ","橘子","orange"],["オーケストラ","管弦樂團","orchestra"]]}, 
    {sym:"カ", roman:"ka", say:"カ", words:[["カード","卡片","card"],["カメラ","相機","camera"],["カフェ","咖啡廳","cafe"],["カナダ","加拿大","Canada"],["カレンダー","日曆","calendar"]]}, 
    {sym:"キ", roman:"ki", say:"キ", words:[["キーボード","鍵盤","keyboard"],["キッチン","廚房","kitchen"],["キロ","公斤","kilo"],["キリン","長頸鹿","giraffe"],["キリスト","基督","Christ"]]}, 
    {sym:"ク", roman:"ku", say:"ク", words:[["クラス","班級","class"],["クリスマス","聖誕節","Christmas"],["クッキー","餅乾","cookie"],["クラブ","俱樂部","club"],["クレジット","信用卡","credit"]]}, 
    {sym:"ケ", roman:"ke", say:"ケ", words:[["ケーキ","蛋糕","cake"],["ケース","箱子","case"],["ケーブル","電纜","cable"],["ケーキ屋","蛋糕店","cake shop"],["ケチャップ","番茄醬","ketchup"]]}, 
    {sym:"コ", roman:"ko", say:"コ", words:[["コーヒー","咖啡","coffee"],["コート","外套","coat"],["コピー","複印","copy"],["コマーシャル","廣告","commercial"],["コントロール","控制","control"]]}, 
    {sym:"サ", roman:"sa", say:"サ", words:[["サッカー","足球","soccer"],["サラダ","沙拉","salad"],["サンドイッチ","三明治","sandwich"],["サンプル","樣本","sample"],["サンタクロース","聖誕老人","Santa Claus"]]}, 
    {sym:"シ", roman:"shi", say:"シ", words:[["シェフ","主廚","chef"],["シーズン","季節","season"],["シート","座位","seat"],["シェイク","奶昔","shake"],["シルク","絲綢","silk"]]}, 
    {sym:"ス", roman:"su", say:"ス", words:[["スーパー","超市","supermarket"],["スカート","裙子","skirt"],["スキー","滑雪","ski"],["スケート","溜冰","skate"],["スピーカー","揚聲器","speaker"]]}, 
    {sym:"セ", roman:"se", say:"セ", words:[["セーター","毛衣","sweater"],["セット","組合","set"],["セレブ","名人","celebrity"],["セミナー","研討會","seminar"],["セール","特價","sale"]]}, 
    {sym:"ソ", roman:"so", say:"ソ", words:[["ソーセージ","香腸","sausage"],["ソファー","沙發","sofa"],["ソフト","軟體","software"],["ソックス","襪子","socks"],["ソーラー","太陽能","solar"]]}, 
    {sym:"タ", roman:"ta", say:"タ", words:[["タクシー","計程車","taxi"],["タワー","塔","tower"],["タオル","毛巾","towel"],["タレント","藝人","talent"],["ターミナル","終點站","terminal"]]}, 
    {sym:"チ", roman:"chi", say:"チ", words:[["チーズ","起司","cheese"],["チケット","票","ticket"],["チョコレート","巧克力","chocolate"],["チーム","團隊","team"],["チャンス","機會","chance"]]}, 
    {sym:"ツ", roman:"tsu", say:"ツ", words:[["ツアー","旅行團","tour"],["ツール","工具","tool"],["ツイッター","推特","Twitter"],["ツアーガイド","導遊","tour guide"]]}, 
    {sym:"テ", roman:"te", say:"テ", words:[["テレビ","電視","television"],["テーブル","桌子","table"],["テニス","網球","tennis"],["テーマ","主題","theme"],["テクノロジー","科技","technology"]]}, 
    {sym:"ト", roman:"to", say:"ト", words:[["トイレ","廁所","toilet"],["トップ","頂部","top"],["トマト","番茄","tomato"],["トルコ","土耳其","Turkey"],["トーナメント","錦標賽","tournament"]]}, 
    {sym:"ナ", roman:"na", say:"ナ", words:[["ナイフ","刀子","knife"],["ナイト","夜晚","night"],["ナンバー","號碼","number"],["ナイロン","尼龍","nylon"],["ナプキン","餐巾","napkin"]]}, 
    {sym:"ニ", roman:"ni", say:"ニ", words:[["ニット","針織","knit"],["ニッケル","鎳","nickel"],["ニンニク","大蒜","garlic"],["ニーズ","需求","needs"],["ニックネーム","暱稱","nickname"]]}, 
    {sym:"ヌ", roman:"nu", say:"ヌ", words:[["ヌードル","麵條","noodle"],["ヌーボー","新","nouveau"],["ヌーベル","新","nouvelle"],["ヌード","裸體","nude"],["ヌルヌル","滑溜溜","slippery"]]}, 
    {sym:"ネ", roman:"ne", say:"ネ", words:[["ネクタイ","領帶","necktie"],["ネガティブ","負面","negative"],["ネイル","指甲","nail"],["ネオン","霓虹","neon"],["ネッシー","尼斯湖水怪","Nessie"]]}, 
    {sym:"ノ", roman:"no", say:"ノ", words:[["ノート","筆記本","notebook"],["ノルウェー","挪威","Norway"],["ノーベル","諾貝爾","Nobel"],["ノルマ","定額","quota"],["ノーベル賞","諾貝爾獎","Nobel Prize"]]}, 
    {sym:"ハ", roman:"ha", say:"ハ", words:[["ハンバーガー","漢堡","hamburger"],["ハイテク","高科技","high-tech"],["ハート","心","heart"],["ハワイ","夏威夷","Hawaii"],["ハロウィン","萬聖節","Halloween"]]}, 
    {sym:"ヒ", roman:"hi", say:"ヒ", words:[["ヒーロー","英雄","hero"],["ヒント","提示","hint"],["ヒステリー","歇斯底里","hysteria"],["ヒット","熱門","hit"],["ヒューマン","人類","human"]]}, 
    {sym:"フ", roman:"fu", say:"フ", words:[["フランス","法國","France"],["フリー","免費","free"],["フロント","前台","front"],["フライドポテト","薯條","french fries"],["フルーツ","水果","fruit"]]}, 
    {sym:"ヘ", roman:"he", say:"ヘ", words:[["ヘリコプター","直升機","helicopter"],["ヘッドホン","耳機","headphones"],["ヘルス","健康","health"],["ヘアスタイル","髮型","hairstyle"],["ヘルメット","安全帽","helmet"]]}, 
    {sym:"ホ", roman:"ho", say:"ホ", words:[["ホテル","飯店","hotel"],["ホーム","家","home"],["ホットドッグ","熱狗","hot dog"],["ホラー","恐怖","horror"],["ホームページ","網頁","homepage"]]}, 
    {sym:"マ", roman:"ma", say:"マ", words:[["マンガ","漫畫","manga"],["マネージャー","經理","manager"],["マッサージ","按摩","massage"],["マヨネーズ","美乃滋","mayonnaise"],["マスコミ","大眾傳媒","mass communication"]]}, 
    {sym:"ミ", roman:"mi", say:"ミ", words:[["ミュージック","音樂","music"],["ミニ","迷你","mini"],["ミルク","牛奶","milk"],["ミュージカル","音樂劇","musical"],["ミステリー","推理","mystery"]]}, 
    {sym:"ム", roman:"mu", say:"ム", words:[["ムービー","電影","movie"],["ムード","氣氛","mood"],["ムーン","月亮","moon"],["ムービー館","電影院","movie theater"],["ムービースター","電影明星","movie star"]]}, 
    {sym:"メ", roman:"me", say:"メ", words:[["メニュー","菜單","menu"],["メール","電子郵件","email"],["メディア","媒體","media"],["メイク","化妝","makeup"],["メッセージ","訊息","message"]]}, 
    {sym:"モ", roman:"mo", say:"モ", words:[["モーター","馬達","motor"],["モデル","模特兒","model"],["モニター","螢幕","monitor"],["モダン","現代","modern"],["モバイル","行動","mobile"]]}, 
    {sym:"ヤ", roman:"ya", say:"ヤ", words:[["ヤンキー","不良少年","delinquent"],["ヤフー","雅虎","Yahoo"],["ヤード","碼","yard"],["ヤング","年輕","young"],["ヤクザ","黑道","yakuza"]]}, 
    {sym:"ユ", roman:"yu", say:"ユ", words:[["ユニフォーム","制服","uniform"],["ユーロ","歐元","euro"],["ユーザー","使用者","user"],["ユニバーサル","通用","universal"],["ユニセックス","中性","unisex"]]}, 
    {sym:"ヨ", roman:"yo", say:"ヨ", words:[["ヨーロッパ","歐洲","Europe"],["ヨガ","瑜伽","yoga"],["ヨット","遊艇","yacht"],["ヨーロッパ人","歐洲人","European"],["ヨーロッパ旅行","歐洲旅行","European travel"]]}, 
    {sym:"ラ", roman:"ra", say:"ラ", words:[["ラーメン","拉麵","ramen"],["ラジオ","收音機","radio"],["ラッシュ","尖峰","rush"],["ランチ","午餐","lunch"],["ラッキー","幸運","lucky"]]}, 
    {sym:"リ", roman:"ri", say:"リ", words:[["リモコン","遙控器","remote control"],["リーダー","領導者","leader"],["リゾート","度假村","resort"],["リサイクル","回收","recycle"],["リラックス","放鬆","relax"]]}, 
    {sym:"ル", roman:"ru", say:"ル", words:[["ルール","規則","rule"],["ルーム","房間","room"],["ルーレット","輪盤","roulette"],["ルート","路線","route"],["ルーティン","例行公事","routine"]]}, 
    {sym:"レ", roman:"re", say:"レ", words:[["レストラン","餐廳","restaurant"],["レコード","唱片","record"],["レンタル","租借","rental"],["レジャー","休閒","leisure"],["レッスン","課程","lesson"]]}, 
    {sym:"ロ", roman:"ro", say:"ロ", words:[["ロボット","機器人","robot"],["ロマンチック","浪漫","romantic"],["ロック","搖滾","rock"],["ロビー","大廳","lobby"],["ロマンス","戀愛","romance"]]}, 
    {sym:"ワ", roman:"wa", say:"ワ", words:[["ワイン","葡萄酒","wine"],["ワイシャツ","襯衫","white shirt"],["ワンピース","洋裝","one-piece dress"],["ワールド","世界","world"],["ワイヤー","電線","wire"]]}, 
    {sym:"ヲ", roman:"wo", say:"ヲ", words:[["ヲ","助詞","particle"]]}, 
    {sym:"ン", roman:"n", say:"ン", words:[["コンビニ","便利商店","convenience store"],["パン","麵包","bread"],["テレビ","電視","television"],["コーヒー","咖啡","coffee"],["ケーキ","蛋糕","cake"]]}
  ]
};

// 從 localStorage 讀取設定，如果沒有則使用預設值
let RATE = parseFloat(localStorage.getItem('speechRate')) || 0.75;
const SPEEDS=[0.5,0.75,1.0];

function updateSpeedUI(){ document.querySelectorAll('.speed').forEach(el=>{ el.textContent='x'+RATE.toFixed(2).replace(/\.00$/,''); }); }
function cycleSpeed(){ 
  const i=SPEEDS.indexOf(RATE); 
  RATE=SPEEDS[(i+1)%SPEEDS.length]; 
  localStorage.setItem('speechRate', RATE.toString());
  updateSpeedUI(); 
}

// === Japanese Voice: 使用 Kyoko，通過米奇模式切換聲音效果 ===
function resolveJaVoice() {
  const all = speechSynthesis.getVoices();
  return all.find(x => /ja/i.test(x.lang || '') && (x.name || '').toLowerCase().includes('kyoko')) || 
         all.find(x => /ja/i.test(x.lang || '')) || null;
}

// 日文語音播放函數，支持米奇模式
function speakJa(t){ 
  const u=new SpeechSynthesisUtterance(t);
  u.lang='ja-JP';
  
  const v = resolveJaVoice();
  if (v) u.voice = v;

  // 語速基準
  const baseRate = (typeof RATE === 'number' ? RATE : 0.75);
  
  // 檢查是否啟用米奇模式
  const mickeyMode = document.getElementById('mickey').classList.contains('on');

  if (mickeyMode) {
    // 米奇模式：搞怪男聲（神經質、像米奇）
    u.rate = Math.min(baseRate * 1.5, 1.6);  // 更快一點
    u.pitch = 1.8;                           // 更高音
    u.volume = 1.0;                          // 正常音量
  } else {
    // 正常模式：蛋捲女聲
    u.rate = baseRate;
    u.pitch = 1.0;
    u.volume = 1.0;
  }

  speechSynthesis.speak(u);
}

// 單一假名：只播 1 次，但稍慢（體感更長）
function speakKanaLong(t){
  const isSingleKana = /^[\u3041-\u309F\u30A0-\u30FF]$/.test(t||'');
  if(!isSingleKana){ speakJa(t); return; }

  const u = new SpeechSynthesisUtterance(t);
  u.lang='ja-JP';
  const v = resolveJaVoice();
  if (v) u.voice = v;

  // 語速基準
  const base = (typeof RATE === 'number' ? RATE : 0.75);
  
  // 檢查是否啟用米奇模式
  const mickeyMode = document.getElementById('mickey').classList.contains('on');

  if (mickeyMode) {
    // 米奇模式：搞怪男聲（神經質、像米奇）
    u.rate = Math.min(base * 1.2, 1.3);  // 比蛋捲快，但比一般太郎稍慢
    u.pitch = 1.8;                        // 高音
    u.volume = 1.0;                       // 正常音量
  } else {
    // 正常模式：蛋捲女聲，但比一般稍慢
    u.rate = Math.max(base * 0.8, 0.55);
    u.pitch = 1.0;
    u.volume = 1.0;
  }

  speechSynthesis.speak(u);
}

function tile(it){ 
  const el=document.createElement('div'); 
  el.className='tile'; 
  el.innerHTML=`<div class='sym'>${it.sym}</div><div class='rom'>${it.roman}</div>`; 
  
  let clickTimer = null;
  
  el.addEventListener('click', (e) => {
    if (clickTimer) {
      clearTimeout(clickTimer);
      clickTimer = null;
      // 這是雙擊，不播放聲音，直接進入詳細頁面
      openDetail(it);
    } else {
      // 這是單擊，設置延遲播放聲音
      clickTimer = setTimeout(() => {
        speakKanaLong(it.say);
        clickTimer = null;
      }, 200);
    }
  });
  
  return el; 
}

function render(){
  const gv=document.getElementById('gridV'); gv.innerHTML=""; DATA.vowels.forEach(it=>gv.appendChild(tile(it)));
  const gc=document.getElementById('gridC'); gc.innerHTML=""; DATA.consonants.forEach(it=>gc.appendChild(tile(it)));
}

// 詞彙映射表
const wordMap = [
  { from: "日本語", to: "にほんご" },
  { from: "日曜日", to: "にちようび" },
  { from: "消しゴム", to: "けしゴム" },
  { from: "平仮名", to: "ひらがな" },
  { from: "飛行機", to: "ひこうき" },
  { from: "縫いぐるみ", to: "ぬいぐるみ" },
  { from: "難しい", to: "むずかしい" },
  { from: "珍しい", to: "めずらしい" },
  { from: "天ぷら", to: "てんぷら" },
  { from: "気持ち", to: "きもち" },
  { from: "皆さん", to: "みなさん" },
  { from: "仲良し", to: "なかよし" },
  { from: "よろしく", to: "よろしく" },
  { from: "すみません", to: "すみません" },
  { from: "日本", to: "にほん" },
  { from: "今日", to: "きょう" },
  { from: "先生", to: "せんせい" },
  { from: "学生", to: "がくせい" },
  { from: "人形", to: "にんぎょう" },
  { from: "本当", to: "ほんとう" },
  { from: "毎朝", to: "まいあさ" },
  { from: "夕方", to: "ゆうがた" },
  { from: "郵便", to: "ゆうびん" },
  { from: "友人", to: "ゆうじん" },
  { from: "落書き", to: "らくがき" },
  { from: "楽天", to: "らくてん" },
  { from: "林檎", to: "りんご" },
  { from: "旅行", to: "りょこう" },
  { from: "料理", to: "りょうり" },
  { from: "類型", to: "るいけい" },
  { from: "類似", to: "るいじ" },
  { from: "累積", to: "るいせき" },
  { from: "練習", to: "れんしゅう" },
  { from: "歴史", to: "れきし" },
  { from: "冷蔵庫", to: "れいぞうこ" },
  { from: "礼儀", to: "れいぎ" },
  { from: "録音", to: "ろくおん" },
  { from: "録画", to: "ろくが" },
  { from: "ろくに", to: "ろくに" },
  { from: "轆轤", to: "ろくろ" },
  { from: "若者", to: "わかもの" },
  { from: "忘れる", to: "わすれる" },
  { from: "分かる", to: "わかる" },
  { from: "笑い", to: "わらい" },
  { from: "若い", to: "わかい" },
  { from: "洗濯", to: "せんたく" },
  { from: "生活", to: "せいかつ" },
  { from: "成功", to: "せいこう" },
  { from: "週末", to: "しゅうまつ" },
  { from: "宿題", to: "しゅくだい" },
  { from: "本", to: "ほん" },
  { from: "赤", to: "あか" },
  { from: "雨", to: "あめ" },
  { from: "足", to: "あし" },
  { from: "朝", to: "あさ" },
  { from: "頭", to: "あたま" },
  { from: "犬", to: "いぬ" },
  { from: "一", to: "いち" },
  { from: "家", to: "いえ" },
  { from: "椅子", to: "いす" },
  { from: "苺", to: "いちご" },
  { from: "馬", to: "うま" },
  { from: "海", to: "うみ" },
  { from: "歌", to: "うた" },
  { from: "牛", to: "うし" },
  { from: "腕", to: "うで" },
  { from: "鉛筆", to: "えんぴつ" },
  { from: "駅", to: "えき" },
  { from: "絵本", to: "えほん" },
  { from: "英語", to: "えいご" },
  { from: "笑顔", to: "えがお" },
  { from: "お金", to: "おかね" },
  { from: "お茶", to: "おちゃ" },
  { from: "男", to: "おとこ" },
  { from: "女", to: "おんな" },
  { from: "花", to: "はな" },
  { from: "鞄", to: "かばん" },
  { from: "紙", to: "かみ" },
  { from: "風", to: "かぜ" },
  { from: "川", to: "かわ" },
  { from: "肩", to: "かた" },
  { from: "木", to: "き" },
  { from: "黄色", to: "きいろ" },
  { from: "狐", to: "きつね" },
  { from: "金", to: "きん" },
  { from: "口", to: "くち" },
  { from: "靴", to: "くつ" },
  { from: "雲", to: "くも" },
  { from: "熊", to: "くま" },
  { from: "黒", to: "くろ" },
  { from: "剣", to: "けん" },
  { from: "稽古", to: "けいこ" },
  { from: "経験", to: "けいけん" },
  { from: "喧嘩", to: "けんか" },
  { from: "子供", to: "こども" },
  { from: "心", to: "こころ" },
  { from: "魚", to: "さかな" },
  { from: "桜", to: "さくら" },
  { from: "砂糖", to: "さとう" },
  { from: "寒い", to: "さむい" },
  { from: "作品", to: "さくひん" },
  { from: "食べる", to: "たべる" },
  { from: "楽しい", to: "たのしい" },
  { from: "建物", to: "たてもの" },
  { from: "宝物", to: "たからもの" },
  { from: "卵", to: "たまご" },
  { from: "小さい", to: "ちいさい" },
  { from: "力", to: "ちから" },
  { from: "地図", to: "ちず" },
  { from: "父", to: "ちち" },
  { from: "中学", to: "ちゅうがく" },
  { from: "机", to: "つくえ" },
  { from: "月", to: "つき" },
  { from: "強い", to: "つよい" },
  { from: "妻", to: "つま" },
  { from: "作る", to: "つくる" },
  { from: "天気", to: "てんき" },
  { from: "手紙", to: "てがみ" },
  { from: "店員", to: "てんいん" },
  { from: "時計", to: "とけい" },
  { from: "鳥", to: "とり" },
  { from: "遠い", to: "とおい" },
  { from: "名前", to: "なまえ" },
  { from: "夏", to: "なつ" },
  { from: "何", to: "なに" },
  { from: "庭", to: "にわ" },
  { from: "温い", to: "ぬるい" },
  { from: "盗む", to: "ぬすむ" },
  { from: "沼", to: "ぬま" },
  { from: "脱ぐ", to: "ぬぐ" },
  { from: "猫", to: "ねこ" },
  { from: "寝る", to: "ねる" },
  { from: "願い", to: "ねがい" },
  { from: "年", to: "ねん" },
  { from: "鼠", to: "ねずみ" },
  { from: "箸", to: "はし" },
  { from: "春", to: "はる" },
  { from: "箱", to: "はこ" },
  { from: "速い", to: "はやい" },
  { from: "火", to: "ひ" },
  { from: "昼", to: "ひる" },
  { from: "秘密", to: "ひみつ" },
  { from: "船", to: "ふね" },
  { from: "服", to: "ふく" },
  { from: "冬", to: "ふゆ" },
  { from: "古い", to: "ふるい" },
  { from: "布団", to: "ふとん" },
  { from: "部屋", to: "へや" },
  { from: "下手", to: "へた" },
  { from: "平和", to: "へいわ" },
  { from: "変", to: "へん" },
  { from: "平気", to: "へいき" },
  { from: "簡単", to: "かんたん" },
  { from: "漢字", to: "かんじ" },
  { from: "海苔", to: "のり" },
  { from: "飲む", to: "のむ" },
  { from: "脳", to: "のう" },
  { from: "残る", to: "のこる" },
  { from: "覗く", to: "のぞく" },
  { from: "星", to: "ほし" },
  { from: "本屋", to: "ほんや" },
  { from: "本質", to: "ほんしつ" },
  { from: "窓", to: "まど" },
  { from: "町", to: "まち" },
  { from: "待つ", to: "まつ" },
  { from: "漫画", to: "まんが" },
  { from: "水", to: "みず" },
  { from: "道", to: "みち" },
  { from: "緑", to: "みどり" },
  { from: "見る", to: "みる" },
  { from: "虫", to: "むし" },
  { from: "昔", to: "むかし" },
  { from: "無理", to: "むり" },
  { from: "娘", to: "むすめ" },
  { from: "目", to: "め" },
  { from: "眼鏡", to: "めがね" },
  { from: "麺", to: "めん" },
  { from: "名刺", to: "めいし" },
  { from: "桃", to: "もも" },
  { from: "森", to: "もり" },
  { from: "門", to: "もん" },
  { from: "もっと", to: "もっと" },
  { from: "文句", to: "もんく" },
  { from: "山", to: "やま" },
  { from: "野菜", to: "やさい" },
  { from: "約束", to: "やくそく" },
  { from: "焼く", to: "やく" },
  { from: "役人", to: "やくにん" },
  { from: "雪", to: "ゆき" },
  { from: "夢", to: "ゆめ" },
  { from: "夜", to: "よる" },
  { from: "読む", to: "よむ" },
  { from: "予定", to: "よてい" },
  { from: "喜ぶ", to: "よろこぶ" },
  { from: "蘭", to: "らん" },
  { from: "落語", to: "らくご" },
  { from: "楽", to: "らく" },
  { from: "寮", to: "りょう" },
  { from: "理解", to: "りかい" },
  { from: "留守", to: "るす" },
  { from: "類", to: "るい" },
  { from: "零", to: "れい" },
  { from: "六", to: "ろく" },
  { from: "を", to: "を" },
  { from: "世界", to: "せかい" },
  { from: "空", to: "そら" },
  { from: "蕎麦", to: "そば" },
  { from: "祖父", to: "そふ" },
  { from: "祖母", to: "そぼ" },
  { from: "掃除", to: "そうじ" },
  { from: "白", to: "しろ" },
  { from: "新聞", to: "しんぶん" },
  { from: "仕事", to: "しごと" },
  { from: "寿司", to: "すし" },
  { from: "鈴", to: "すず" },
  { from: "好き", to: "すき" },
  { from: "凄い", to: "すごい" },
  { from: "1", to: "いち" },
  { from: "2", to: "に" },
  { from: "3", to: "さん" },
  { from: "4", to: "よん" },
  { from: "5", to: "ご" },
  { from: "6", to: "ろく" },
  { from: "7", to: "なな" },
  { from: "8", to: "はち" },
  { from: "9", to: "きゅう" },
  { from: "10", to: "じゅう" },
  { from: "ケーキ屋", to: "ケーキや" },
  { from: "ノーベル賞", to: "ノーベルしょう" },
  { from: "ムービー館", to: "ムービーかん" },
  { from: "ヨーロッパ人", to: "ヨーロッパじん" },
  { from: "ヨーロッパ旅行", to: "ヨーロッパりょこう" },
  { from: "茶", to: "ちゃ" },
  { from: "消", to: "け" },
  { from: "屋", to: "や" },
  { from: "賞", to: "しょう" },
  { from: "館", to: "かん" },
  { from: "人", to: "じん" },
  { from: "思", to: "おも" },
  { from: "行", to: "い" },
  { from: "友達", to: "ともだち" },
  { from: "図書館", to: "としょかん" },
  { from: "図書", to: "としょ" },
  { from: "長い", to: "ながい" },
  { from: "運動", to: "うんどう" },
  { from: "老人", to: "ろうじん" }
];

function buildReadingFromMap(s){
  // 先整詞找最長匹配（沿用你現有的 wordMap）
  const sorted = [...wordMap].sort((a,b)=>b.from.length-a.from.length);
  const hit = sorted.find(w => w.from === s);
  if(hit) return hit.to;

  // 如果找不到完整匹配，返回 null（不標註）
  return null;
}

// 獲取純文字讀音（用於語音播放）
function getPlainReading(ja) {
  // 先嘗試取整詞讀音
  const readingAll = buildReadingFromMap(ja);
  if (readingAll) return readingAll;

  // 處理混合文字：將漢字替換為讀音，保留假名
  return ja.replace(/([\u4E00-\u9FFF]+)/g, seg => {
    const yomi = buildReadingFromMap(seg);
    return yomi || seg;
  });
}

function formatWord(ja){
  // 1) 沒有漢字：不標
  const hasKanji = /[\u4E00-\u9FFF]/.test(ja);
  if (!hasKanji) return `<div class='ko'>${ja}</div>`;


  // 已經有 ruby 就不重複
  if (ja.includes('<ruby>')) return `<div class='ko'>${ja}</div>`;

  // 先嘗試取整詞讀音提示
  const readingAll = buildReadingFromMap(ja);

  // 2) 動詞/形容詞等「尾碼假名」處理：只給前面的漢字上 ruby
  const suffix = ja.match(/[ぁ-ゖー]+$/);      // 尾端平假名（送り仮名）
  if (suffix){
    const kanaSuffix = suffix[0];
    if (readingAll && readingAll.endsWith(kanaSuffix)){
      const baseKanji = ja.slice(0, -kanaSuffix.length);
      const baseReading = readingAll.slice(0, -kanaSuffix.length);
      return `<div class='ko'><ruby>${baseKanji}<rt>${baseReading}</rt></ruby>${kanaSuffix}</div>`;
    }
  }

  // 3) 其它混合情境（片假名 + 漢字 等）：僅對「連續漢字段」加 ruby
  const result = ja.replace(/([\u4E00-\u9FFF]+)/g, seg=>{
    const yomi = buildReadingFromMap(seg);
    return yomi ? `<ruby>${seg}<rt>${yomi}</rt></ruby>` : seg;
  });
  
  return `<div class='ko'>${result}</div>`;
}

function openDetail(item){ 
  document.getElementById('bigSym').textContent=item.sym; 
  
  // 為大字母卡片添加點擊事件
  const bigLetter = document.getElementById('bigLetter');
  bigLetter.onclick = () => speakKanaLong(item.say);
  
  const w=document.getElementById('words'); 
  w.innerHTML=''; 
  item.words.forEach(([ja,zh,rom])=>{ 
    const d=document.createElement('div'); 
    d.className='word'; 
    d.setAttribute('data-say', getPlainReading(ja)); 
    d.innerHTML=`${formatWord(ja, rom)}<div><div class='zh'>${zh}</div><div class='desc'>${rom}</div></div>`; 
    w.appendChild(d); 
  }); 
  const appbars = document.querySelectorAll('.appbar:not(#detailAppbar)');
  appbars.forEach(ab => ab.style.display='none');
  document.getElementById('detail').style.display='block'; 
}

document.addEventListener('click',e=>{ 
  if(e.target.closest('.speed')) return cycleSpeed(); 
  const word=e.target.closest('.word'); 
  if(word && word.getAttribute('data-say')){ 
    word.classList.add('pulse','amber-temp'); 
    setTimeout(()=>word.classList.remove('pulse','amber-temp'),350); 
    speakJa(word.getAttribute('data-say')); 
    return; 
  } 
  const s=e.target.getAttribute('data-say'); 
  if(s) speakJa(s); 
});

document.getElementById('back').addEventListener('click',()=>{ 
  document.getElementById('detail').style.display='none'; 
  const appbars = document.querySelectorAll('.appbar:not(#detailAppbar)');
  appbars.forEach(ab => ab.style.display='');
});

const btnV=document.getElementById('btnV'), btnC=document.getElementById('btnC');
btnV.addEventListener('click',()=>{btnV.classList.add('teal');btnC.classList.remove('teal');document.getElementById('gridV').style.display='grid';document.getElementById('gridC').style.display='none';});
btnC.addEventListener('click',()=>{btnC.classList.add('teal');btnV.classList.remove('teal');document.getElementById('gridC').style.display='grid';document.getElementById('gridV').style.display='none';});

updateSpeedUI();
render();

// 初始化所有米奇按鈕並從 localStorage 恢復狀態
function initializeMickeyButtons() {
  const mickeyButtons = [
    document.getElementById('mickey'),
    document.getElementById('mickeyModal')
  ].filter(Boolean); // 過濾掉不存在的元素
  
  const mickeyState = localStorage.getItem('mickeyMode') === 'true';
  
  mickeyButtons.forEach(button => {
    if (mickeyState) {
      button.classList.add('on');
    }
    
    button.addEventListener('click', e => {
      const isOn = !e.currentTarget.classList.contains('on');
      
      // 同步所有米奇按鈕的狀態
      mickeyButtons.forEach(btn => {
        if (isOn) {
          btn.classList.add('on');
        } else {
          btn.classList.remove('on');
        }
      });
      
      localStorage.setItem('mickeyMode', isOn.toString());
    });
  });
}

initializeMickeyButtons();
</script></body></html>